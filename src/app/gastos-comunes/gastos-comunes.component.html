<div class="gastos-container">
  <h2>ğŸ“‹ GestiÃ³n de Gastos Comunes</h2>

  <div class="form-wrapper">
    <form (ngSubmit)="crearGastosComunes()">
      <div class="form-group">
        <label for="mes">ğŸ“… Mes (Opcional):</label>
        <input
          type="number"
          id="mes"
          [(ngModel)]="mes"
          name="mes"
          min="1"
          max="12"
          placeholder="Ingrese el mes (1-12)"
        />
        <small class="help-text">DÃ©jelo vacÃ­o para generar los gastos para todo el aÃ±o.</small>
      </div>
      <div class="form-group">
        <label for="anio">ğŸ“† AÃ±o:</label>
        <input
          type="number"
          id="anio"
          [(ngModel)]="anio"
          name="anio"
          min="2000"
          required
          placeholder="Ingrese el aÃ±o"
        />
      </div>
      <button type="submit" class="btn-submit">ğŸš€ Generar</button>
    </form>
  </div>

  <button class="btn-toggle" (click)="toggleGastosComunes()">ğŸ‘€ Ver Gastos Comunes</button>

  <div *ngIf="mostrarLista">
    <h3 class="list-header">ğŸ“‘ Lista de Gastos Comunes por Departamento</h3>
    <ul class="departamentos-list">
      <li *ngFor="let codDepto of obtenerKeys(gastosPorDepartamento)" class="departamento-item">
        <!-- Encabezado del departamento con flecha -->
        <div class="departamento-header" (click)="toggleDepartamento(codDepto)">
          <span class="arrow" [ngClass]="{ 'expanded': departamentosDesplegados[codDepto] }">
            â–¶
          </span>
          <strong>Departamento:</strong> {{ codDepto }}
        </div>
    
        <!-- Lista de gastos comunes por departamento -->
        <ul *ngIf="departamentosDesplegados[codDepto]" class="gastos-list">
          <li *ngFor="let gasto of gastosPorDepartamento[codDepto]" class="gasto-item">
            <div><strong>ğŸ“… Mes/AÃ±o:</strong> {{ gasto.mes }}/{{ gasto.anio }}</div>
            <div><strong>ğŸ’µ Valor Pagado:</strong> {{ gasto.valor_pagado | currency }}</div>
            <div><strong>ğŸ—“ï¸ Fecha de Pago:</strong> {{ gasto.fecha_pago || 'No pagado' }}</div>
            <div><strong>âš ï¸ Atrasado:</strong> {{ gasto.atrasado ? 'SÃ­' : 'No' }}</div>
          </li>
        </ul>
      </li>
    </ul>
    

    
</div>

<div class="text-center mt-4">
  <a routerLink="/home" class="btn btn-home">â¬…ï¸ Volver al Inicio</a>
</div>
